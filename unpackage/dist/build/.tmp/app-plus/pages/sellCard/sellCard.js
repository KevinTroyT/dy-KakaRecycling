(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sellCard/sellCard"],{"06b5":function(t,a,e){"use strict";var r=e("5742"),o=e.n(r);o.a},1745:function(t,a,e){"use strict";(function(t,e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r={data:function(){return{card1Show:!1,card2Show:!1,card3Show:!1,item:["单卡提交","批量提交"],current:0,src:"",card1List:[],card2List:[],card3List:[],token:"",card1Name:"",card1Logo:"",card1Id:"",card2Name:"",card2Logo:"",card2Id:"",hasCardNumber:"0",card3Id:"",card3FaceValue:"",card3Discount:"",discountPrice:"",remark:"",cardNumber:"",cardPsd:"",cards:"",name:"",phone:"",commitMemuShow:!1}},onShow:function(){var a=this;this.src=this.url,this.token=t.getStorageSync("token");var r=t.getStorageSync("card1Id"),o=t.getStorageSync("card2Id"),c=t.getStorageSync("hasCardNumber"),d=this;t.request({url:this.url+"/mobile/classificationData",method:"POST",header:{"content-type":"application/x-www-form-urlencoded",token:this.token},data:{type:2},success:function(t){if(console.log(e(t," at pages\\sellCard\\sellCard.vue:226")),d.card1List=t.data.data.classList,r){a.card1Id=r;for(var o=0;o<d.card1List.length;o++)d.card1List[o].id==r&&(d.card1Id=d.card1List[o].id,d.card1Name=d.card1List[o].name,d.card1Logo=d.card1List[o].logo)}}}),r&&(t.removeStorageSync("card1Id"),t.request({url:d.url+"/mobile/cardListData",method:"POST",header:{"content-type":"application/x-www-form-urlencoded",token:d.token},data:{type:2,commodityClassId:r},success:function(t){if(console.log(e(t," at pages\\sellCard\\sellCard.vue:254")),d.card2List=t.data.data,o){console.log(e(o," at pages\\sellCard\\sellCard.vue:257")),a.card2Id=o,a.hasCardNumber=c;for(var r=0;r<d.card2List.length;r++)d.card2List[r].id==o&&(d.card2Id=d.card2List[r].id,d.card2Name=d.card2List[r].name,d.card2Logo=d.card2List[r].imgPath)}}})),o&&(t.removeStorageSync("card2Id"),t.removeStorageSync("hasCardNumber"),t.request({url:d.url+"/mobile/getFaceVlaueData",method:"POST",header:{"content-type":"application/x-www-form-urlencoded",token:d.token},data:{type:2,commodityId:o},success:function(t){console.log(e(t," at pages\\sellCard\\sellCard.vue:286")),d.card3List=t.data.data;for(var a=0;a<d.card3List.length;a++)d.card3List[a].discountPrice=(d.card3List[a].faceValue*d.card3List[a].discount).toFixed(2),d.card3List[a].discount=(10*d.card3List[a].discount).toFixed(1)}})),t.request({url:this.url+"/mobile/realData",method:"GET",header:{"content-type":"application/x-www-form-urlencoded",token:this.token},data:{},success:function(t){console.log(e(t," at pages\\sellCard\\sellCard.vue:306")),d.name=t.data.realName,d.phone=t.data.alipayAccount}})},methods:{goProblem_often:function(){t.navigateTo({url:"../problem_often/problem_often"})},commitCard:function(){var a=this;"0"==this.current?t.request({url:this.url+"/mobile/saveCard",method:"POST",header:{"content-type":"application/x-www-form-urlencoded",token:this.token},data:{commodityId:this.card2Id,feedbackId:this.card3Id,cardNumber:this.cardNumber,cardPassword:this.cardPsd,alipayAccount:this.phone,realName:this.name,type:0,hasCardNumber:this.hasCardNumber},success:function(r){console.log(e(r," at pages\\sellCard\\sellCard.vue:339")),a.commitMemuShow=!1,r.data.result?t.showToast({title:"提交成功",duration:2e3,success:function(){t.switchTab({url:"../order/order"})}}):t.showToast({title:r.data.msg,icon:"none",duration:2e3})},error:function(){t.showToast({title:"网络错误,请稍后再试",icon:"none",duration:2e3})}}):t.request({url:this.url+"/mobile/saveCard",method:"POST",header:{"content-type":"application/x-www-form-urlencoded",token:this.token},data:{commodityId:this.card2Id,feedbackId:this.card3Id,alipayAccount:this.phone,realName:this.name,cards:this.cards,type:1,hasCardNumber:this.hasCardNumber},success:function(r){console.log(e(r," at pages\\sellCard\\sellCard.vue:386")),a.commitMemuShow=!1,r.data.result?t.showToast({title:"提交成功",duration:2e3,success:function(){t.switchTab({url:"../order/order"})}}):t.showToast({title:r.data.msg,icon:"none",duration:2e3})},error:function(){t.showToast({title:"网络错误,请稍后再试",icon:"none",duration:2e3})}})},closeMemu:function(){this.commitMemuShow=!1},commit:function(){if(""==this.name||""==this.phone)return t.showModal({title:"提交",content:"请先绑定打款账户",success:function(){t.navigateTo({url:"../account/account"})}}),!1;if("0"==this.current)if("0"==this.hasCardNumber){if(""==this.cardNumber)return t.showModal({title:"提交",content:"请输入礼品卡卡号"}),!1;if(""==this.cardPsd)return t.showModal({title:"提交",content:"请输入礼品卡卡密"}),!1;this.commitMemuShow=!0}else{if(""==this.cardPsd)return t.showModal({title:"提交",content:"请输入礼品卡卡密"}),!1;this.commitMemuShow=!0}else{if(""==this.cards)return t.showModal({title:"提交",content:"请至少输入一张礼品卡信息"}),!1;this.commitMemuShow=!0}},scanningCard:function(){var a=this;console.log(e(12345678978," at pages\\sellCard\\sellCard.vue:473")),t.scanCode({onlyFromCamera:!1,success:function(t){console.log(e(t.result," at pages\\sellCard\\sellCard.vue:477")),a.cardNumber=t.result}})},scanningPsd:function(){var a=this;t.scanCode({onlyFromCamera:!1,success:function(t){console.log(e(t.result," at pages\\sellCard\\sellCard.vue:487")),a.cardPsd=t.result}})},card1Click:function(){this.card1Show=!0},card1Close:function(){this.card1Show=!1},pitchCard1:function(a,r,o){this.card2Id="",this.card2Name="",this.card2Logo="",this.hasCardNumber="",this.card3Id="",this.card3FaceValue="",this.card3Discount="",this.discountPrice="",this.card3List=[];var c=this;this.card1Id=a,this.card1Name=r,this.card1Logo=o,this.card1Show=!1,t.request({url:c.url+"/mobile/cardListData",method:"POST",header:{"content-type":"application/x-www-form-urlencoded",token:c.token},data:{type:2,commodityClassId:c.card1Id},success:function(t){console.log(e(t," at pages\\sellCard\\sellCard.vue:527")),c.card2List=t.data.data}})},card2Click:function(){this.card2Show=!0},card2Close:function(){this.card2Show=!1},pitchCard2:function(a,r,o,c,d){this.card3Id="",this.card3FaceValue="",this.card3Discount="",this.discountPrice="";var s=this;this.card2Id=a,this.card2Name=r,this.card2Logo=o,this.remark=d,this.hasCardNumber=c,this.card2Show=!1,t.request({url:s.url+"/mobile/getFaceVlaueData",method:"POST",header:{"content-type":"application/x-www-form-urlencoded",token:s.token},data:{type:2,commodityId:s.card2Id},success:function(t){console.log(e(t," at pages\\sellCard\\sellCard.vue:562")),s.card3List=t.data.data;for(var a=0;a<s.card3List.length;a++)s.card3List[a].discountPrice=(s.card3List[a].faceValue*s.card3List[a].discount).toFixed(2),s.card3List[a].discount=(10*s.card3List[a].discount).toFixed(1)}})},card3Click:function(){this.card3Show=!0},card3Close:function(){this.card3Show=!1},pitchCard3:function(t,a,e,r){this.card3Id=t,this.card3FaceValue=a,this.card3Discount=(1*e).toFixed(1)+"折",this.discountPrice=r,this.card3Show=!1},changeTab:function(t){this.current=t}}};a.default=r}).call(this,e("6e42")["default"],e("0de9")["default"])},"284c":function(t,a,e){"use strict";e.r(a);var r=e("1745"),o=e.n(r);for(var c in r)"default"!==c&&function(t){e.d(a,t,function(){return r[t]})}(c);a["default"]=o.a},5742:function(t,a,e){},"8d45":function(t,a,e){"use strict";e.r(a);var r=e("d17f"),o=e("284c");for(var c in o)"default"!==c&&function(t){e.d(a,t,function(){return o[t]})}(c);e("06b5");var d=e("2877"),s=Object(d["a"])(o["default"],r["a"],r["b"],!1,null,null,null);a["default"]=s.exports},d17f:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement;t._self._c},o=[];e.d(a,"a",function(){return r}),e.d(a,"b",function(){return o})},d5d8:function(t,a,e){"use strict";(function(t){e("e02a"),e("921b");r(e("66fd"));var a=r(e("8d45"));function r(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("6e42")["createPage"])}},[["d5d8","common/runtime","common/vendor"]]]);